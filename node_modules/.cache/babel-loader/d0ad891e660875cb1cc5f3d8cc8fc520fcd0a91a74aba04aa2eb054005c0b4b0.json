{"ast":null,"code":"import React,{useEffect,useState}from'react';import{db}from'./firebase';import'./MainDisplay.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MainDisplay=()=>{const[items,setItems]=useState([]);const[hearts,setHearts]=useState([]);useEffect(()=>{const startTime=Date.now();const inputRef=db.ref('inputs');inputRef.on('child_added',snapshot=>{const data=snapshot.val();if(data&&data.timestamp>startTime-1000){spawnItem(data.emoji);}});return()=>inputRef.off();},[]);const spawnItem=emoji=>{const id=Date.now()+Math.random();const newItem={id,emoji,left:Math.random()*20+40};setItems(prev=>[...prev,newItem]);setTimeout(()=>{setItems(prev=>prev.filter(item=>item.id!==id));addHeart();},5000);};const addHeart=()=>{const id=Date.now()+Math.random();setHearts(prev=>[...prev.slice(-150),id]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"game-container\",children:[items.map(item=>/*#__PURE__*/_jsx(\"div\",{className:\"falling-emoji\",style:{left:\"\".concat(item.left,\"%\"),animationDuration:\"\".concat(4+Math.random()*2,\"s\")},children:item.emoji},item.id)),/*#__PURE__*/_jsxs(\"div\",{className:\"chest-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chest-placeholder\",children:\"\\uD83C\\uDF81\"}),/*#__PURE__*/_jsx(\"div\",{className:\"heart-pile\",children:hearts.map(h=>/*#__PURE__*/_jsx(\"div\",{className:\"stacked-heart\",children:\"\\u2764\\uFE0F\"},h))})]})]});};export default MainDisplay;","map":{"version":3,"names":["React","useEffect","useState","db","jsx","_jsx","jsxs","_jsxs","MainDisplay","items","setItems","hearts","setHearts","startTime","Date","now","inputRef","ref","on","snapshot","data","val","timestamp","spawnItem","emoji","off","id","Math","random","newItem","left","prev","setTimeout","filter","item","addHeart","slice","className","children","map","style","concat","animationDuration","h"],"sources":["/Users/hong-geun-yeong/Documents/projects/ddkpp5/src/MainDisplay.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { db } from './firebase';\nimport './MainDisplay.css';\n\nconst MainDisplay = () => {\n  const [items, setItems] = useState([]);\n  const [hearts, setHearts] = useState([]);\n\n  useEffect(() => {\n    const startTime = Date.now();\n    const inputRef = db.ref('inputs');\n\n    inputRef.on('child_added', (snapshot) => {\n      const data = snapshot.val();\n      if (data && data.timestamp > startTime - 1000) {\n        spawnItem(data.emoji);\n      }\n    });\n\n    return () => inputRef.off();\n  }, []);\n\n  const spawnItem = (emoji) => {\n    const id = Date.now() + Math.random();\n    const newItem = { id, emoji, left: Math.random() * 20 + 40 };\n\n    setItems((prev) => [...prev, newItem]);\n\n    setTimeout(() => {\n      setItems((prev) => prev.filter((item) => item.id !== id));\n      addHeart();\n    }, 5000);\n  };\n\n  const addHeart = () => {\n    const id = Date.now() + Math.random();\n    setHearts((prev) => [...prev.slice(-150), id]);\n  };\n\n  return (\n    <div className=\"game-container\">\n      {items.map((item) => (\n        <div\n          key={item.id}\n          className=\"falling-emoji\"\n          style={{ left: `${item.left}%`, animationDuration: `${4 + Math.random() * 2}s` }}\n        >\n          {item.emoji}\n        </div>\n      ))}\n\n      <div className=\"chest-wrapper\">\n        <div className=\"chest-placeholder\">üéÅ</div>\n\n        <div className=\"heart-pile\">\n          {hearts.map((h) => (\n            <div key={h} className=\"stacked-heart\">‚ù§Ô∏è</div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MainDisplay;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}